# IoT-MQTT 系統架構說明

## 系統設計理念
本專案採用 Docker 容器化技術，實現一個可移植、易部署的 MQTT 訂閱者系統。

## 技術架構圖
```
┌─────────────────────────────────────────────┐
│              Host Machine                   │
│  ┌─────────────────────────────────────┐   │
│  │        Docker Container             │   │
│  │  ┌─────────────────────────────┐   │   │
│  │  │   Python Application        │   │   │
│  │  │   • tmp-sub.py              │   │   │
│  │  │   • subscriber.py           │   │   │
│  │  └─────────────┬───────────────┘   │   │
│  │                │                    │   │
│  │        ┌───────▼───────┐            │   │
│  │        │  MQTT Client  │◄───────────┼───┼─────┐
│  │        └───────┬───────┘            │   │     │
│  │                │                    │   │     │
│  │        ┌───────▼───────┐            │   │     │
│  │        │  HTTP Request │───────────►│   │     │
│  │        └───────────────┘            │   │     │
│  └─────────────────────────────────────┘   │     │
│           │                   ▲            │     │
│           ▼                   │            │     │
│  ┌─────────────────┐  ┌──────────────┐    │     │
│  │ Volume Mount    │  │ Volume Mount │    │     │
│  │ • /x (程式碼)    │  │ • /xlog_mqtt │    │     │
│  │   ↔ $(pwd)      │  │   ↔ ~/log_mqtt│    │     │
│  └─────────────────┘  └──────────────┘    │     │
└───────────┬────────────────────────────────┘     │
            │                                        │
            ▼                                        │
┌──────────────────────────────────────────────────┐│
│             External Services                    ││
│  ┌─────────────────┐    ┌─────────────────┐    ││
│  │  MQTT Broker    │    │  HTTP Server    │◄───┘│
│  │  (Mosquitto)    │    │                 │     │
│  │  Port: 1883     │    │  Port: 12112    │     │
│  └─────────────────┘    └─────────────────┘     │
└──────────────────────────────────────────────────┘
```

## 檔案說明

### 核心程式
- **subscriber.py**: 基本訂閱者，僅顯示接收到的 MQTT 訊息
- **tmp-sub.py**: 進階訂閱者，接收 MQTT 訊息並轉發到 HTTP 伺服器
- **publisher.py**: 發布者程式，用於發布測試訊息

### Docker 配置
- **Dockerfile**: 容器建置定義檔
- **appRun.sh**: 容器啟動腳本，負責日誌記錄

### 配置與說明
- **requirements.txt**: Python 套件相依檔案
- **run-instructions.txt**: 完整執行步驟說明
- **setup.sh**: 一鍵安裝腳本
